<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        // æ•°ç»„çš„æ‰©å±•
        // 1 æ‰©å±•è¿ç®—ç¬¦
        // demo1
        console.log(...[1, 2, 3]) // 1 2 3
        console.log(1, ...[2, 3, 4], 5) // 1 2 3 4 5
        function add(x, y) {
            return x + y;
        }
        const nums = [1, 2, 6];
        console.log(add(...nums)); // 3

        // demo2
        // æ›¿ä»£æ•°ç»„çš„ apply æ–¹æ³•
        // ES5 çš„å†™æ³•
        function f(x, y, z) {
            console.log(x, y, z); // 0 1 2
        }
        var args = [0, 1, 2];
        f.apply(null, args);

        // ES6 çš„å†™æ³•
        function es6f(x, y, z) {
            console.log(x, y, z); // 0 1 2
        }
        es6f(...args);

        // demo3
        // ES5 çš„å†™æ³•
        console.log(Math.max.apply(null, [14, 3, 77])) // 77
        // ES6 çš„å†™æ³•
        console.log(Math.max(...[14, 3, 77])) // 77
        // ç­‰åŒäº
        console.log(Math.max(14, 3, 77)) // 77

        // demo4
        // é€šè¿‡pushå‡½æ•°ï¼Œå°†ä¸€ä¸ªæ•°ç»„æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„çš„å°¾éƒ¨ã€‚
        // ES5çš„ å†™æ³•
        // var arr1 = [0, 1, 2];
        // var arr2 = [3, 4, 5];
        // Array.prototype.push.apply(arr1, arr2);
        // console.log(arr1); // [0, 1, 2, 3, 4, 5]


        // ES6 çš„å†™æ³•
        let arr1 = [0, 1, 2];
        let arr2 = [3, 4, 5];
        arr1.push(...arr2);
        console.log(arr1); // [0, 1, 2, 3, 4, 5]

        // demo5
        // ES5
        let date = new (Date.bind.apply(Date, [null, 2015, 1, 1]))
        console.log(date.getFullYear()); // 2015
        console.log(date.getMonth()); // 1
        console.log(date.getDate()); // 1

        let date2 = new Date(...[2015, 1, 1]);
        console.log(date2.getFullYear()); // 2015
        console.log(date2.getMonth()); // 1
        console.log(date2.getDate()); // 1


        // æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨
        // å¤åˆ¶æ•°ç»„   æ•°ç»„æ˜¯å¤åˆçš„æ•°æ®ç±»å‹ï¼Œç›´æ¥å¤åˆ¶çš„è¯ï¼Œåªæ˜¯å¤åˆ¶äº†æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å…‹éš†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚
        // demo6
        const a = [1, 2];
        const a2 = a;
        a2[0] = 2;
        console.log(a); // [2, 2]

        // demo7
        // concatæ–¹æ³•ç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜ç°æœ‰çš„æ•°ç»„ï¼Œè€Œä»…ä»…ä¼šè¿”å›è¢«è¿æ¥æ•°ç»„çš„ä¸€ä¸ªå‰¯æœ¬ã€‚
        const b1 = [1, 2];
        console.log(b1.concat([3,4])) // [1, 2, 3, 4]
        console.log(b1.concat(3,4)) // [1, 2, 3, 4]

        // demo8
        const c1 = [1, 2];
        const c2 =  c1.concat();
        c2[0] = 2
        console.log(c2); // [2, 2]

        // ä¸è§£æ„èµ‹å€¼ç»“åˆ
        const list = [1, 2, 3, 4, 5];
        // es5
        var a0 = list[0];
        var rest = list.slice(1);
        console.log(a0) // 1
        console.log(rest) // [2, 3, 4, 5]
        // es6
        let [a1, ...rest1] = list;
        console.log(a1) // 1
        console.log(rest1) // [2, 3, 4, 5]

        // demo9
        // å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
        // const [...butLast, last] = [1, 2, 3, 4, 5];
        // // æŠ¥é”™  Uncaught SyntaxError: Rest element must be last element

        // const [first, ...middle, last] = [1, 2, 3, 4, 5];
        // // æŠ¥é”™ Uncaught SyntaxError: Rest element must be last element

        // å­—ç¬¦ä¸² æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚
        // demo10
        console.log([...'ä»¥å›ä¸ºè´µ']) // ["ä»¥", "å’Œ", "ä¸º", "è´µ"]
        // ä¸Šé¢çš„å†™æ³•ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å››ä¸ªå­—èŠ‚çš„ Unicode å­—ç¬¦ã€‚
        console.log('x\uD83D\uDE80y'.length) // 4
        console.log([...'x\uD83D\uDE80y'].length) // 3

        // demo11
        // split() æ–¹æ³•ç”¨äºæŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚
        // reverse() æ–¹æ³•ç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºã€‚
        // join() æ–¹æ³•ç”¨äºæŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

        let str = 'x\uD83D\uDE80y';
        console.log(str.split('')) // ["x", "ï¿½", "ï¿½", "y"]
        console.log(str.split('').reverse()) //  ["y", "ï¿½", "ï¿½", "x"]
        console.log(str.split('').reverse().join('')) // yï¿½ï¿½x
        console.log([...str].reverse()) // ["y", "ğŸš€", "x"]
        console.log([...str].reverse().join('')) // yğŸš€x
        

    </script>
</head>
<body>
    <div>111</div>
    <div>111</div>
    <div>111</div>
    <div>111</div>
    <div>111</div>
    <script>
        // demo12
        // å®ç°äº† Iterator æ¥å£çš„å¯¹è±¡
        let nodeList = document.querySelectorAll('div');
        let array = [...nodeList];
        console.log(array) // [div, div, div, div, div]
        // querySelectorAllæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªnodeListå¯¹è±¡ã€‚å®ƒä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚è¿™æ—¶ï¼Œæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼ŒåŸå› å°±åœ¨äºNodeListå¯¹è±¡å®ç°äº† Iterator ã€‚
        // å¯¹äºé‚£äº›æ²¡æœ‰éƒ¨ç½² Iterator æ¥å£çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚
        let arrayLike = {
            '0': 'a',
            '1': 'b',
            '2': 'c',
            length: 3
        };
        // console.log([...arrayLike]) // arrayLike is not iterable
        // Array.from() æ–¹æ³•ä»ä¸€ä¸ªç±»ä¼¼æ•°ç»„æˆ–å¯è¿­ä»£çš„å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å®ä¾‹ã€‚
        arrayLike = Array.from(arrayLike)
        console.log([...arrayLike]) //  ["a", "b", "c"]

        // demo13
        // Map å’Œ Set ç»“æ„ï¼ŒGenerator å‡½æ•°
        // æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„ Iterator æ¥å£ï¼Œå› æ­¤åªè¦å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œæ¯”å¦‚ Map ç»“æ„ã€‚
        let map = new Map([
            [1, 'one'],
            [2, 'two'],
            [3, 'three'],
        ]);

        let arr = [...map.keys()]; 
        let arr11 = [...map.values()]; 
        console.log(arr) //[1, 2, 3]
        console.log(arr11) //  ["one", "two", "three"]


        // Generator å‡½æ•°è¿è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚
        const go = function*(){
            yield 1;
            yield 2;
            yield 3;
        };
        console.log([...go()]); // [1, 2, 3]
    </script>
</body>
</html>