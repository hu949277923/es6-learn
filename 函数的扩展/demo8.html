<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        // 8 尾调用优化
        // 什么是尾调用？
        // 尾调用（Tail Call）是函数式编程的一个重要概念，本身非常简单，一句话就能说清楚，就是指某个函数的最后一步是调用另一个函数。
        // demo1
        // function f(x){
        //     return g(x);
        // }

        // 不属于尾调用
        // 情况一
        // function f(x){
        //     let y = g(x);
        //     return y;
        // }
        // // 情况二
        // function f(x){
        //     return g(x) + 1;
        // }

        // // 情况三
        // function f(x){
        //     g(x);
        // }

        // 尾调用优化

        // 尾递归
        // 函数调用自身，称为递归。如果尾调用自身，就称为尾递归。
        // 递归非常耗费内存，因为需要同时保存成千上百个调用帧，很容易发生“栈溢出”错误（stack overflow）。但对于尾递归来说，由于只存在一个调用帧，所以永远不会发生“栈溢出”错误。
        // function factorial(n) {
        //     if (n === 1) return 1;
        //     return n * factorial(n - 1);
        // }
        // console.log(factorial(5)) // 120
        function factorial(n, total) {
            if (n === 1) return total;
            return factorial(n - 1, n * total);
        }
        // 5 1  (4 5 1)
        // 4 5 (3 4 5)
        // 3 20 (2 3 20)
        // 2 60 (1 2 60)
        // 1 120 (120)
        factorial(5, 1) // 120
    </script>
</head>
<body>
    
</body>
</html>